# C#

## 난이도 : 플레티넘 5

## 알고리즘 분류
  - 자료 구조
  - 세그먼트 트리

## 제한조건
  - 시간 제한 : 1초
  - 메모리 제한 : 128 MB

## 문제
대한민국은 동아시아에 위치한 한반도에 위치하고 있다. 3면이 바다인 한국의 서쪽으로 서해, 동쪽으로 동해, 남쪽으로 남해에 의해 둘러싸여 있다.<br/>
대한민국의 동해안에는 도시가 N개 있고, 서해안에는 도시가 M개 있다. (M ≤ 1000, N ≤ 1000) 각 도시는 북쪽부터 남쪽까지 번호가 1번부터 매겨져 있다. 새로 취임한 대통령은 서해안과 동해안을 연결하는 K개의 고속도로를 만들려고 한다. 각 고속도로는 동해안에 있는 도시와 서해안에 있는 도시를 연결하는 일직선 도로이다. (원래 일직선인 도로는 운전사를 지루하게 하고 피로감을 느끼게 하여 사고의 원인이 되므로, 일부러 고저를 만들거나 커브를 만들어서 그러한 일이 일어나지 않도록 설계되어 있다)<br/>
고속도로가 서로 교차하는 곳에는 휴게소를 지으려고 한다. 한 점에서 교차하는 고속도로는 최대 2개이다. 고속도로가 주어졌을 때, 고속도로가 교차하는 곳의 개수를 구하는 프로그램을 작성하시오.<br/>


## 입력
입력의 첫째 줄에는 테스트 케이스의 개수 T가 주어진다. 각 테스트 케이스의 첫째 줄에는 N, M, K가 주어진다. K는 고속도로의 수이다. 둘째 줄부터 K개의 줄에는 고속도로의 정보가 주어진다. 고속도로의 정보는 숫자 2개로 이루어져 있다. 첫 번째 숫자는 동해안에 있는 도시의 번호이고, 두 번째 숫자는 서해안에 있는 도시의 번호이다.<br/>
고속도로의 개수는 40만개보다 작거나 같으며, 문제의 정답이 263-1보다 작거나 같은 경우만 입력으로 주어진다.<br/>


## 출력
각 테스트 케이스에 대해서, 교차점의 수를 케이스 번호와 함께 출력한다.<br/>


## 예제 입력
1<br/>
3 4 4<br/>
1 4<br/>
2 3<br/>
3 2<br/>
3 1<br/>


## 예제 출력
Test case 1: 5<br/>


## 풀이
규칙성을 찾는데, 왼쪽을 도시 번호를 기준으로 내림차순, 왼쪽 도시번호가 같다면 오른쪽 도시 번호를 내림차순으로 정렬한다.<br/>
이후 해당 도로를 한개씩 배치하다보면 휴게소의 갯수는 오른쪽 도시 번호보다 작은 고속도로의 갯수가 된다.<br/>
범위에 갯수를 찾아야하므로 세그먼트 트리로 자료구조를 저장하는데 누적합으로 관리하면 된다.<br/>


그래서 먼저 입력 데이터의 고속도로를 왼쪽 도시 번호를 기준으로 내림차순을 최우선으로 차선으로 오른쪽 도시번호로 내림차순으로 정렬 한다.<br/>
그리고 정렬된 고속도로를 읽는데 오른쪽 도시번호를 누적합 세그먼트 트리에 저장하고, 해당 오른쪽 도시보다 작은 도로의 갯수를 정답에 누적한다.<br/>
이렇게 고속도로를 모두 읽으면서 누적한 값이 정답이 된다.<br/>


## 문제 링크
https://www.acmicpc.net/problem/3770