# C#

## 난이도 : 실버 2

## 알고리즘 분류
  - 수학
  - 구현
  - 브루트포스 알고리즘
  - 확률론

## 제한조건
  - 시간 제한 : 2초
  - 메모리 제한 : 128 MB

## 문제
최백준은 8명이 참가하는 스타크래프트 토너먼트를 개최했다. 토너먼트는 3개의 라운드로 열리고, 다음과 같이 진행된다.<br/>
라운드 1에서 i번 경기는 2×i번 참가자와 2×i+1번 참가자의 경기이다. (0 ≤ i ≤ 3), 4명의 승자가 라운드 2로 진출한다.<br/>
라운드 2에서 2*i번 경기의 승자와 2×i+1번 경기의 승자가 서로 경기를 한다. (0 ≤ i ≤ 1), 2명의 승자가 라운드 3에 진출한다.<br/>
라운드 2의 승자가 토너먼트의 승자를 가리기 위해서 한 게임을 한다.<br/>
8명의 참가자가 서로와 싸웠을 때 이길 수 있는 승률이 주어진다. 이때, 각 참가자가 우승할 수 있는 확률을 구하는 프로그램을 작성하시오.<br/>


## 입력
첫째 줄에 수 28개가 주어진다. 처음 7개의 수는 0번 참가자가 1번 참가자와 싸워서 이길 수 있는 확률부터 7번 참가자와 싸워서 이길 수 있는 확률이다. 다음 6개의 수는 1번 참가자와 2번 참가자와 싸워서 이길 수 있는 확률부터 7번 참가자와 싸워서 이길 수 있는 확률이다. 이와 같이 주어진다. 모든 수는 정수이다.<br/>


## 출력
첫째 줄에 각 참가자가 우승할 수 있는 확률을 출력한다. 절대/상대 오차는 10^-9까지 허용한다.<br/>


## 예제 입력
1 2 4 7 11 16 22 3 5 8 12 17 23 6 9 13 18 24 10 14 19 25 15 20 26 21 27 28<br/>


## 예제 출력
0.0000688919608 0.009061234459199999 0.011498979459599998 0.1853675541204 0.0328889066112 0.18542493028680002 0.17985791390280004 0.3958315891991999<br/>


## 풀이
문제에서 i가 j( >i)에 이길확률이 주어지는데, winRate[i - 1][j - 1]에 저장한다.<br/>
winRate[j - 1][i - 1]은 i가 j에게 질 확률이고 여집합으로 생각하면 winRate[j - 1][i - 1] = 1 - winRate[i - 1][j - 1]이다.<br/>


같은 라운드에서 다른 두개의 경기에 대해 A경기가 B경기 결과에 영향을 주지 않는다. 즉, 두 경기는 독립적이다.<br/>
그리고 두 사건이 독립이므로 A가 일어날 확률을 P(A)라 하고 n을 교집합, B|A A가 일어날 때 B가 일어날 확률이라 하자.<br/>
그러면 P(B|A) = P(A n B) / P(A)이고, 두 사건이 독립이므로 P(B|A) = P(B)이고 P(A n B) = P(A)P(B)가 성립한다.<br/>


이를 이용하여 win[i][j] = val배열을 만들었는데, i번 연승을 뜻하고, j + 1번 선수의 확률 val를 담는다.<br/>
예를들어 2라운드에 2번 선수가 올라가 win[2][2 - 1]의 확률을 보자.<br/>
2연승이기에 2번 선수가 1승을 하는 확률 win[1][2 - 1]이 있다.<br/>
2번 선수가 2라운드에서 만날 수 있는 상대는 3번 선수와 4번 선수이다.<br/>


먼저 3번 선수가 1연승을 할 확률 win[1][3 - 1]에 2번선수가 3번 선수를 이겨야한다.<br/>
win[1][2 - 1] x win[1][3 - 1] x winRate[2 - 1][3 - 1]이 된다.<br/>

똑같이 4번 선수가 1연승을 할 확률 win[1][4- 1]에 2번 선수가 4번 선수를 이겨야한다.<br/>
win[1][2 - 1] x win[1][4 - 1] x winRate[2 - 1][4 - 1]이 된다.<br/>
둘을 합한 값이 win[2][2 - 1]가 된다.<br/>
이렇게 순차적으로 찾아갔다.<br/>


다만 10^-9이내의 오차를 맞춰야 하는데, 정수로 만들어 계산을해도 3연승은 10^12로 long 범위 안에 들어온다.<br/>
그래서 정수로 만든 뒤 정답을 찾았다.<br/>


## 문제 링크
https://www.acmicpc.net/problem/1404