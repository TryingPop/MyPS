# C#

## 난이도 : 골드 3

## 알고리즘 분류
  - 수학
  - 다이나믹 프로그래밍
  - 조합론

## 제한조건
  - 시간 제한 : 2초
  - 메모리 제한 : 128 MB

## 문제
이번 ACM-ICPC 대회에 참가한 모든 사람들은 선물을 하나씩 준비했다.<br/>
대회가 끝나고 난 후에 각자 선물을 전달하려고 할 때, 선물을 나누는 경우의 수를 구하는 프로그램을 작성하시오.<br/>
모든 사람은 선물을 하나씩 받으며, 자기의 선물을 자기가 받는 경우는 없다.<br/>


## 입력
첫째 줄에 ACM-ICPC 대회에 참가한 학생의 수 N(1 ≤ N ≤ 1,000,000)이 주어진다.<br/>


## 출력
경우의 수를 1,000,000,000으로 나눈 나머지를 첫째 줄에 출력한다.<br/>


## 예제 입력
21<br/>


## 예제 출력
50944540<br/>


## 풀이
dp[i] = val를 i명일 때 선물을 나눠주는 경우의 수를 val라 한다.<br/>
그리고 직접 수형도를 나열하면 다음과 같은 점화식을 얻을 수 있다.<br/>


dp[1] = 0, dp[2] = 1<br/>
dp[i] = (i - 1) * dp[i - 2] + (i - 1) * (i - 2) * dp[i - 3] + ... + (i - 1) * (i - 2) * ... * 3 * dp[2] + (i - 1)!<br/>


그런데 해당 점화식을 쓰기에는 N이 100만이고 N^2의 방법이므로 쓰지 못한다.<br/>
점화식을 다음과 같이 묶으면 다음처럼 나타낼 수 있다.<br/>


dp[i] = (i - 1) * dp[i - 2] + (i - 1) ((i - 2) * dp[i - 3] + ... + (i - 2) * ... * 3 * dp[2] + (i - 2)!)<br/>
= (i - 1) * dp[i - 2] + (i - 1) * dp[i - 1] = (i - 1) * (dp[i - 1] + dp[i -2])<br/>


해당 점화식을 이용하면 O(N)에 찾을 수 있다.<br/>
그래서 해당 점화식으로 풀었다.<br/>


## 문제 링크
https://www.acmicpc.net/problem/1947