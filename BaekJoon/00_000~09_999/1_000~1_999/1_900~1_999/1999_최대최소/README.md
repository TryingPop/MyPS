# C#

## 난이도 : 골드 4

## 알고리즘 분류
  - 다이나믹 프로그래밍
  - 자료 구조

## 제한조건
  - 시간 제한 : 2초
  - 메모리 제한 : 128 MB

## 문제
N×N의 행렬이 있다(1 ≤ N ≤ 250). 행렬의 각 성분은 250보다 작거나 같은 음이 아닌 정수이다. 당신에게는 K(1 ≤ K ≤ 100,000)개의 질문이 주어진다. 각 질문은, 주어진 행렬의 B×B 크기의 부분행렬의 최댓값과 최솟값의 차이를 묻는 질문들이다(1 ≤ B ≤ N). 각 질문에 대해서, 부분행렬의 가장 왼쪽 위의 위치가 주어지며, 모든 질문들은 같은 B값을 갖는다. 질문에 답하는 프로그램을 작성하시오.<br/>


## 입력
첫째 줄에는 세 정수 N, B, K가 주어진다. 다음 N개의 줄에는 행렬이 주어진다. 차례로 1행, 2행, …, N행이 된다. 각 줄에는 N개의 정수가 주어지며, 이는 차례로 1열의 성분, 2열의 성분, …, N열의 성분이 된다. 다음 K개의 줄에는 질문들이 주어진다. 각 질문들은 두 정수 i, j로 주어진다. i는 부분행렬의 가장 윗쪽의 행 번호이며, j는 부분행렬의 가장 왼쪽의 열 번호이다(1 ≤ i, j ≤ N-B+1)<br/>


## 출력
K개의 줄에, 차례로 각 질문의 답변(부분행렬의 최댓값과 최솟값의 차이값)을 출력한다.<br/>


## 예제 입력
5 3 1<br/>
5 1 2 6 3<br/>
1 3 5 2 7<br/>
7 2 4 6 1<br/>
9 9 8 6 5<br/>
0 6 9 3 9<br/>
1 2<br/>


## 예제 출력
5<br/>


## 풀이
크기 B인 모든 사각형의 최대 최소를 찾아주면 된다.<br/>
단순히 찾는 경우 (N - B) x (M - B) x B x B로 최악의 경우 B = 125이고, N = 250, M = 250이면 125^4 꽤 많은 시간이 걸린다.<br/>
시간이 2초라 해당 방법도 유효하다.<br/>


그런데, 사각형이 확장 되는 것을 보면, 다음과 같다.<br/>

초기 사각형의 위치를 O라 하자.

|O|→|
|:---:|:---:|
|↓|↘|


그러면 화살표 방향으로 확장된다.<br/>
각 방향별로 최댓값과 최솟값을 각각 비교하며 최솟값과, 최댓값을 찾으면 확장된 범위의 사각형안에 최솟값과 최댓값이라 할 수 있다.<br/>
이렇게 4개씩 B의 크기로 확장해가면 B x N x M x 4로 엄청나게 시간이 줄어든다.<br/>


## 문제 링크
https://www.acmicpc.net/problem/1999