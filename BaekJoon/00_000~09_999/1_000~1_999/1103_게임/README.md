# C#

## 난이도 : 골드 2

## 알고리즘 분류
  - 다이나믹 프로그래밍
  - 그래프 이론
  - 그래프 탐색
  - 깊이 우선 탐색

## 제한조건
  - 시간 제한 : 2초
  - 메모리 제한 : 512 MB

## 문제
형택이는 1부터 9까지의 숫자와, 구멍이 있는 직사각형 보드에서 재밌는 게임을 한다.<br/>
일단 보드의 가장 왼쪽 위에 동전을 하나 올려놓는다. 그다음에 다음과 같이 동전을 움직인다.<br/>

  1. 동전이 있는 곳에 쓰여 있는 숫자 X를 본다.
  2. 위, 아래, 왼쪽, 오른쪽 방향 중에 한가지를 고른다.
  3. 동전을 위에서 고른 방향으로 X만큼 움직인다. 이때, 중간에 있는 구멍은 무시한다.

만약 동전이 구멍에 빠지거나, 보드의 바깥으로 나간다면 게임은 종료된다. 형택이는 이 재밌는 게임을 되도록이면 오래 하고 싶다.<br/>
보드의 상태가 주어졌을 때, 형택이가 최대 몇 번 동전을 움직일 수 있는지 구하는 프로그램을 작성하시오.<br/>

## 입력
줄에 보드의 세로 크기 N과 가로 크기 M이 주어진다. 이 값은 모두 50보다 작거나 같은 자연수이다. 둘째 줄부터 N개의 줄에 보드의 상태가 주어진다. 쓰여 있는 숫자는 1부터 9까지의 자연수 또는 H이다. 가장 왼쪽 위칸은 H가 아니다. H는 구멍이다.<br/>

## 출력
첫째 줄에 문제의 정답을 출력한다. 만약 형택이가 동전을 무한번 움직일 수 있다면 -1을 출력한다.<br/>

## 예제 입력
3 7<br/>
2H9HH11<br/>
HHHHH11<br/>
9HHHH11<br/>

## 예제 출력
2<br/>

## 풀이
dp[r][c]를 r, c에서 던질 수 있는 최고 횟수를 담는다.<br/>
그리고 visit[r][c]를 r, c를 방문했는지 여부를 담는다.<br/>
isEnd[r][c]를 사이클이 없는 여부를 담는다.<br/>
먼저 홀에 빠지는 지점이거나, 4방향으로 이동했을 때 모두 장외로 가는경우를 먼저 끝지점으로 한다.<br/>
그리고 0, 0에서 시작해 DFS로 해당 배열들을 채웠다.<br/>
N x M x 4번을 연산한다.<br/>


DFS에서는 현재지점에서 다음 이동 지점 4방향이 모두 끝지점으로 가는 경우 현재지점도 isEnd를 true로 한다.<br/>
반면 이동 중 적어도 1개가 4방향 탐색 중 이전에 isEnd가 false인 방문한 노드를 방문하는 경우 이는 사이클이 존재하는 것이다.<br/>
그래서 사이클이 발견되면 isEnd를 false가 되게 설정했다. 이 경우 dp에 담기는 값은 의미가 없어 진다.<br/>
반면 0, 0에서 시작해 이동하는 경로에 사이클이 없는 경우 최대 점프할 수 있는 경우를 dp에 담기게 설정했다.<br/>
중복 방문을 허용하지 않기에 많아야 N x M x 4 번의 노드를 탐색한다.


여기서 visit 없이 하다가 무한루프에 빠져 스택 오버 플로우로 Segfault 에러로 여러 번 틀렸다.<br/>
처음에 어떤 문제인지 몰라 고민만 하다가 로직을 하나하나 따져보니 무한루프 문제였음을 알 수 있었다.<br/>


## 문제 링크
https://www.acmicpc.net/problem/1103