# C#

## 난이도 : 골드 5

## 알고리즘 분류
  - 수학
  - 애드 혹
  - 많은 조건 분기

## 제한조건
  - 시간 제한 : 2초
  - 메모리 제한 : 128 MB

## 문제
첫 항이 x이고 공차가 d인 등차수열의 첫 k개의 항은 x, x+d, x+2d, ..., x+(k-1)d이다. x와 d가 자연수인 등차수열의 첫 k개의 항의 합으로 나타낼 수 있는 수 중에서, l 이상이고 r 이하인 수가 몇 개인지 구하는 프로그램을 작성하시오.<br/>


## 입력
자연수 l, r, k가 순서대로 한 줄에 하나씩 주어진다. (1 ≤ l ≤ r ≤ 1,000,000,000, 2 ≤ k ≤ 5)<br/>


## 출력
첫째 줄에 조건을 만족하는 수의 개수를 출력한다.<br/>


## 예제 입력
1<br/>
10<br/>
2<br/>


## 예제 출력
8<br/>


## 풀이
시작항이 자연수고, 공차가 자연수인 조건이므로 값이 존재하려면 1 + 2 + ... + k 값 이상이어야 한다.<br/>
그리고 2 + 3+ 4+ ... + k + 1 = 1 + 1 + 2 + 1 + ... + k + 1 = 1 + 2+ 3+ ... + k + k = k x (k + 1) / 2 + k로 공차가 1인 경우 k간격으로 값이 나올 수 있다.<br/>
공차가 2인 경우도 비슷하게 보면, 1 + 3 + ... + 2k - 1 = (1 + 2 + ... + k) + (1 + 2 + ... + k - 1) = k x (k + 1) / 2 + k x (k - 1) / 2이다.<br/>


여기서 k가 홀수인 경우 k x (k - 1) / 2를 보면 k - 1이 짝수이고, 2로 나누어떨어진다. 즉, b = (k - 1) / 2라 하면 자연수고,<br/>
1 + 3 + 5 + ... + 2k - 1 = k x (k + 1) / 2 + bk의 형태로 표현가능하다.<br/>
이는 1 + b + 2 + b + ... + k + b = k x (k + 1) / 2 + bk로 볼 수 있다.<br/>
즉 공차가 2인 경우는 공차가 1인 k의 수열로 표현가능하다.<br/>
공차 n에 대해 수학적 귀납법을 적용하면 공차는 1의 해집합에 포함됨을 알 수 있다.<br/>
그래서 l, r 에서 k x (k + 1) / 2에 k간격의 수들이 몇 개 있는지 세면 된다.<br/>


이젠 k가 짝수인 경우 공차 1인 경우는 k x (k + 1) / 2부터 k간격으로 나오는 것은 같다.<br/>
공차 2인 경우를 보면 1 + 3 + ... + 2k - 1 = k x (k + 1) / 2 + k x (k - 1) / 2이고, k - 1, k + 1은 홀수이므로 2로 나눠떨어질 수 없다.<br/>
그래서 앞과 달리, k x (k - 1) / 2 = bk의 형태로 표현할 수 없다.<br/>
연산을 해보면 1 + 3 + ... + 2k - 1 = k x (k + 1) / 2 + k x (k - 1) / 2 = k^2을 얻고, k^2부터 k로 나온다.<br/>
k^2은 k x (k + 1)) / 2에 k간격으로 어떻게 더해도 k^2 + k / 2 또는 k^2 - k / 2로 될 수 없다.<br/>


이후 공차가 3인 경우는 공차1로 표현할 수 있다.<br/>
1 + 4 + 7 + ... + 3k - 2 = 1 + 2 + 3 + ... + k + 2 x ( 1+ 2+ ... + k - 1) = k x (k + 1) / 2 + k x (k - 1)로 표현된다.<br/>
k - 1은 자연수이고, 1 + 4 + 7 + ... + 3k - 1 = 1 + 2 + 3 + ... + k + (k - 1 + k - 1 + ... + k - 1) = k + k + 1 + k + 2 + ... + 2k - 1이 됨을 알 수 있다.<br/>
마찬가지로 공차가 4인 경우를 해보면 2로 표현됨을 알 수 있다.<br/>
수학적 귀납법을 이용하면 공차가 n에 대해 n이 홀수면 공차가 1로 표현가능하고, n이 짝수이면 공차가 2로 표현가능하다.<br/>
그래서 l, r에서 k + (k + 1) / 2에 k간격의 수들이 몇 개 있는지 확인하고,<br/>
또한 l, r에서 k^2부터 k간격의 수들이 몇 개 있는지 확인하면 된다.<br/>


해당 두 경우로 l, r에서 특정 간격으로 있는 수들을 찾는 문제로 바뀐다.<br/>
그리고 l, r을 찾는 것은 0, e 범위에 k 간격의 수들이 몇개 포함되는지를 찾는 함수 Cnt를 만들면,<br/>
Cnt(r, 간격) - Cnt(l - 1, 간격)으로 바뀐다.<br/>
해당 방법으로 정답을 구했다.<br/>


## 문제 링크
https://www.acmicpc.net/problem/1419