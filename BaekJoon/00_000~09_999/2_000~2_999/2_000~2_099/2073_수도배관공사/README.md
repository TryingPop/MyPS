# C#

## 난이도 : 골드 4

## 알고리즘 분류
  - 다이나믹 프로그래밍
  - 배낭 문제

## 제한조건
  - 시간 제한 : 2초
  - 메모리 제한 : 128 MB

## 문제
아기염소들이 언덕에서 풀을 뜯고 놀다 보면 항상 도중에 목이 마르곤 했다. 그들은 불편함을 참지 못하고 수도관을 설치하여 거리 D(7 ≤ D ≤ 100,000)만큼 떨어진 곳의 강에서 물을 끌어오기로 했다. 근처의 인간 마을에서 P개(1 ≤ P ≤ 350)의 파이프를 매입했는데, 각각은 길이 Li와 용량 Ci로 나타낼 수 있다. (Li와 Ci는 모두 2^23보다 작거나 같은 양의 정수이다)<br/>
파이프들은 일렬로 이어서 수도관 하나로 만들 수 있으며, 이때 수도관의 용량은 그것을 이루는 파이프들의 용량 중 최솟값이 되고, 수도관의 길이는 파이프들 길이의 총합이다.<br/>
수도관을 한 개 만들어 총 길이가 정확히 D와 같게 할 때, 가능한 최대 수도관 용량을 구하는 프로그램을 작성하시오.<br/>


## 입력
첫째 줄에 D와 P가 주어진다. 두 번째 줄부터 P개의 줄이 차례로 주어지고, 각 줄마다 Li와 Ci가 주어진다. 길이 합이 D가 되게 하는 수도관의 부분집합이 적어도 하나 존재한다.<br/>


## 출력
가능한 최대 수도관 용량을 첫째 줄에 출력한다.<br/>


## 예제 입력
7 6<br/>
4 5<br/>
3 6<br/>
2 7<br/>
1 4<br/>
6 7<br/>
1 5<br/>


## 예제 출력
5<br/>


## 풀이
파이프의 개수는 350개 이하이고, 찾고자 하는 길이는 10만을 넘지 않는다.<br/>
이를 통해 배낭 문제로 환원해도 충분히 유효한 계산량임을 알 수 있다.<br/>
(최악의 경우 350 × 100,000 = 3,500만 연산)<br/>


이에 따라 dp[i]를 길이 i를 만들 수 있을 때의 최대 용량으로 정의했다.<br/>
즉, dp[i]는 길이 i를 만들 수 있을 때 가능한 파이프 조합 중, 가장 작은 용량값(최솟값)을 최대화한 결과를 의미한다.<br/>


초기 상태로는 dp[0] = 123_456_789와 같은 충분히 큰 값을 넣는다.<br/>
이는 아무 파이프도 사용하지 않은 상태이므로, 이후 Min(dp[i], pipe.capacity) 계산에서 항상 pipe의 용량이 선택되도록 하기 위함이다.<br/>


점화식은 다음과 같다.<br/>
각 파이프의 길이를 len, 용량을 cap이라 할 때, c = Min(dp[i], cap)를 통해 현재 위치 i에 이 파이프를 연결했을 때의 최소 용량을 계산한다.<br/>
그 후, dp[i + len] = Max(dp[i + len], c)로 갱신한다.<br/>


이때 파이프는 1번씩만 사용할 수 있으므로, dp 배열을 업데이트할 때는 i를 내림차순으로 순회해야 한다.<br/>
이렇게 하면 중복 사용 없이 올바르게 값을 갱신할 수 있다.<br/>


마지막으로 우리가 원하는 길이 d에 대해 dp[d]의 값을 출력하면, 해당 길이를 만들 수 있는 경우 중 최대 용량을 구할 수 있다.<br/>


## 문제 링크
https://www.acmicpc.net/problem/2073