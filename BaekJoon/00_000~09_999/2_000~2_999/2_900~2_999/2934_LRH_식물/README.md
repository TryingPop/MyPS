# C#

## 난이도 : 플레티넘 4

## 알고리즘 분류
  - 자료 구조
  - 세그먼트 트리
  - 느리게 갱신되는 세그먼트 트리

## 제한조건
  - 시간 제한 : 1초
  - 메모리 제한 : 128 MB

## 문제
상근이는 유전자 조작을 통해 줄기 두 개로 이루어진 식물을 만들었다. 이 식물은 줄기의 x좌표 L, R과 높이 H로 나타낼 수 있다. 아래 그림은 L=2, R=5, H=4인 식물이다.<br/>
(문제 링크로 이동해 그림을 참고하자.)<br/>
상근이는 매일 매일 화단에 식물을 하나씩 심는다. 첫 번째 날에 심은 식물의 높이는 1이고, 그 다음날에 심은 식물은 전날에 심은 식물의 높이보다 1 크다.<br/>
새 식물의 줄기가 다른 식물의 수평 선분과 교차하는 경우가 있다. 이러한 경우에 그 위치에는 꽃이 하나 피게 된다. (이미 꽃이 있는 경우에는 꽃이 더 피지 않는다) 점에서 접하는 경우에는 꽃이 피지 않는다.<br/>
아래 그림은 예제를 나타낸 것이다.<br/>
모든 식물의 좌표가 주어졌을 때, 매일 매일 피는 꽃의 개수를 구하는 프로그램을 작성하시오.<br/>



## 입력
첫째 줄에 식물을 심은 날의 수 N (1 ≤ N ≤ 100,000)이 주어진다.<br/>
다음 N개 줄에는 매일 매일 심은 식물의 두 줄기 좌표 L과 R이 주어진다. (1 ≤ L < R ≤ 100,000)<br/>


## 출력
총 N개의 줄에 매일 매일 핀 꽃의 수를 출력한다.<br/>


## 예제 입력
4<br/>
1 4<br/>
3 7<br/>
1 6<br/>
2 6<br/>


## 예제 출력
0<br/>
1<br/>
1<br/>
2<br/>


## 풀이
새롭게 피어나는 꽃의 갯수를 세어줘야 한다.<br/>
꽃이 피어나는 장소를 보면 추가되는 식물의 각 끝에서만 피어난다.<br/>
그리고 이전 식물의 경우는 끝을 제외한 구간에서 꽃이 피어난다.<br/>
그리고 꽃이 피어난 장소에는 중복으로 피어나지 않는다.<br/>


그래서 범위 꽃의 끝이 아닌 개구간 (l, r)에 꽃의 갯수를 저장해줘야 한다.<br/>
이는 범위에 값을 저장하기에 느리게 갱신되는 세그먼트 트리로 해결하는게 좋다.<br/>
하지만 찾는 값이 구간이 아닌 하나의 점 i에 유효한 줄기가 몇개인지 세어야 한다.<br/>
그래서 세그먼트 트리를 이용해 해결할 수 있다.<br/>
구간에 누적된 줄기의 갯수를 저장하고, 읽을 때는 값에 도달하는데 값을 누적시키면 된다.<br/>


이미 피어난 곳은 세지 않기에 읽고 나면 해당 점에 읽은 값을 빼주는 식으로 했다.<br/>


## 문제 링크
https://www.acmicpc.net/problem/2934