# C#

## 난이도 : 플레티넘 1

## 알고리즘 분류
  - 자료 구조
  - 트리
  - 세그먼트 트리
  - 느리게 갱신되는 세그먼트 트리
  - heavy-light 분할

## 제한조건
  - 시간 제한 : 1초
  - 메모리 제한 : 128 MB

## 문제
N개의 농장과 농장을 양방향으로 연결하는 N-1개의 도로가 있다. 임의의 두 농장 사이에는 하나의 경로만 존재한다. 농장은 1번부터 N번까지 번호가 매겨져 있다.<br/>
농장을 관리하는 재현이는 도로에 나무를 심기로 결정했다. 나무를 심는 과정은 쿼리로 이루어져 있으며, 쿼리는 총 2가지가 존재한다.<br/>

  - P u v: u번 농장과 v번 농장 사이의 경로에 존재하는 모든 도로에 나무를 하나씩 심는다.
  - Q u v: u번 농장과 v번 농장 사이의 도로에 존재하는 나무의 개수를 출력한다.

초기에 나무는 한 그루도 심겨져 있지 않다. 쿼리를 수행해보자.<br/>


## 입력
첫째 줄에 농장의 수 N과 쿼리의 수 M(1 ≤ N, M ≤ 100,000)이 주어진다.<br/>
둘째 줄부터 N-1개의 줄에는 도로가 연결하는 농장의 번호가 주어진다.<br/>
다음 M개의 줄에는 쿼리가 한 줄에 하나씩 주어진다. 쿼리는 한 개의 문자 w와 두 개의 정수 u, v로 이루어져 있고, 문제에서 설명한 형식이다.<br/>


## 출력
쿼리 Q가 주어질 때 마다, 나무의 개수를 출력한다.<br/>


## 예제 입력
4 6<br/>
1 4<br/>
2 4<br/>
3 4<br/>
P 2 3<br/>
P 1 3<br/>
Q 3 4<br/>
P 1 4<br/>
Q 2 4<br/>
Q 1 4<br/>


## 예제 출력
2<br/>
1<br/>
2<br/>


## 풀이
N개의 농장과 N - 1 개의 도로가 있다. 그리고 임의의 두 농장 사이에는 하나의 경로만 존재한다.<br/>
이로 농장을 노드로, 도로를 간선으로 그래프를 만들면 트리이다.<br/>
쿼리 중 u에서 v번 농장 사이의 도로에 존재하는 나무의 갯수를 찾아야 한다.<br/>
그래서 HLD 알고리즘으로 경로 사이의 노드(간선의 값)들을 관리했다.<br/>
또 쿼리 중 u에서 v경로의 범위에 1개씩 추가하는 연산을 하기에 세그먼트 트리는 느리게 갱신되는 세그먼트 트리로 했다.<br/>


## 문제 링크
https://www.acmicpc.net/problem/5916