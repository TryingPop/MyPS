# C#

## 난이도 : 골드 4

## 알고리즘 분류
  - 자료 구조
  - 문자열
  - 정렬
  - 트리
  - 집합과 맵
  - 트라이

## 제한조건
  - 시간 제한 : 1초
  - 메모리 제한 : 256 MB

## 문제
전화번호 목록이 주어진다. 이때, 이 목록이 일관성이 있는지 없는지를 구하는 프로그램을 작성하시오.<br/>
전화번호 목록이 일관성을 유지하려면, 한 번호가 다른 번호의 접두어인 경우가 없어야 한다.<br/>
예를 들어, 전화번호 목록이 아래와 같은 경우를 생각해보자.<br/>

  - 긴급전화: 911
  - 상근: 97 625 999
  - 선영: 91 12 54 26

이 경우에 선영이에게 전화를 걸 수 있는 방법이 없다. 전화기를 들고 선영이 번호의 처음 세 자리를 누르는 순간 바로 긴급전화가 걸리기 때문이다. 따라서, 이 목록은 일관성이 없는 목록이다.<br/>


## 입력
첫째 줄에 테스트 케이스의 개수 t가 주어진다. (1 ≤ t ≤ 50) 각 테스트 케이스의 첫째 줄에는 전화번호의 수 n이 주어진다. (1 ≤ n ≤ 10000) 다음 n개의 줄에는 목록에 포함되어 있는 전화번호가 하나씩 주어진다. 전화번호의 길이는 길어야 10자리이며, 목록에 있는 두 전화번호가 같은 경우는 없다.<br/>


## 출력
각 테스트 케이스에 대해서, 일관성 있는 목록인 경우에는 YES, 아닌 경우에는 NO를 출력한다.<br/>


## 예제 입력
2<br/>
3<br/>
911<br/>
97625999<br/>
91125426<br/>
5<br/>
113<br/>
12340<br/>
123440<br/>
12345<br/>
98346<br/>


## 예제 출력
NO<br/>
YES<br/>


## 풀이
각 전화번호에 대해 다른 전화번호의 접두어가 되는지 확인해야한다.<br/>


전화번호의 개수는 최대 1만 개이다.<br/>
단순 브루트포스로 두 전화번호 쌍을 모두 비교하면 1만 × 1만 = 1억 번 비교하게 된다.<br/>
각 비교는 최대 10자리까지 비교하므로 최악의 경우 총 10억 번의 연산이 발생할 수 있다.<br/>
이는 1초 시간 제한을 초과할 수 있다.<br/>


트라이를 사용하면 전화번호의 각 자릿수를 따라가며 길이만큼 노드를 생성하여 저장할 수 있다.<br/>
그리고 각 경우 전화번호를 트라이에 삽입하면서 접두어를 판별할 수 있다.<br/>


접두어가 존재하는 경우 다음 두 가지 경우가 있다.<br/>

  1. 삽입하는 전화번호가 트라이에 등록된 전화번호의 접두어인 경우
  2. 트라이에 등록된 전화번호가 삽입하는 전화번호의 접두어인 경우

1번의 경우는 삽입 도중 새로운 노드가 하나도 생성되지 않으면 발생한다.<br/>
이를 위해 삽입 중 새로운 노드가 추가되는지를 검사한다.<br/>


2번의 경우는 삽입 중인 경로 어딘가에 기존 전화번호의 끝 지점(종료 노드)이 포함되어 있을 때 발생한다.<br/>
이를 감지하기 위해 삽입 도중 종료 표시가 된 노드를 만나는지를 확인한다.<br/>


트라이에 전화번호를 넣으면서 접두어가 되는지 확인했다.<br/>
그러면 전화번호의 갯수 N은 최대 1만이고, 전화번호의 길이는 10을 넘지 않는다 했으므로 시간 복잡도는 O(10N) = O(N)이 된다.<br/>


각 노드는 0~9에 해당하는 자식 포인터 배열(10칸)을 가지므로, 하나의 노드당 메모리 사용량은 상수이다.<br/>
전화번호가 최대 1만 개이고, 각 번호의 길이는 최대 10이므로 총 노드는 최대 10만 개가 생성된다.<br/>
따라서 전체 메모리 사용량은 약 10만 × 10 = 100만 단위이며, 충분히 허용 가능한 수준이다.<br/>


추가로 난이도 기여 부분을 보니 정렬로 해결할 수 있다고 한다.<br/>
사전 순으로 전화번호를 정렬한다.<br/>
그리고 인접한 항끼리 접두어가되는지 비교하면 된다고 한다.<br/>


## 문제 링크
https://www.acmicpc.net/problem/5052