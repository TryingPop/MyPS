# C#

## 난이도 : 골드 1

## 알고리즘 분류
  - 자료 구조
  - 애드 혹

## 제한조건
  - 시간 제한 : 2초
  - 메모리 제한 : 256 MB

## 문제
크기 n의 순열은, 1부터 n까지의 정수가 정확히 한 번 등장하는 길이 n의 수열을 뜻한다. 이 순열을 a1, a2, ..., an 으로 표기하자. 순열 a를 통해서 순열 그래프를 만들 수 있다. 순열 그래프는 1, 2, ..., n의 번호를 가진 n개의 정점으로 이루어진 무방향 그래프이다. 순열 그래프의 두 정점 쌍 i, j (1 ≤ i < j ≤ n) 는 ai > aj 일때 간선으로 연결되어 있다.<br/>
순열 그래프의 연결성을 판별하기 위해서, 당신은 순열 그래프를 다음과 같은 알고리즘으로 탐색해야 한다.<br/>

  1. 1번 정점부터 순서대로 n번 정점까지 순회한다. 현재 처리 중인 정점을 i 번 정점이라고 하자.
  2. i번 정점이 이전에 탐색되었다면, 넘어간다. 그렇지 않다면, i번 정점과 연결된 모든 정점을 탐색한 후, 탐색한 정점을 모아 집합을 하나 만든다.
  3. 최종적으로, 구한 집합의 총 개수와, 각 집합의 정보를 출력한다.

알고리즘을 읽은 동욱이는, 이 문제가 그래프의 연결 컴포넌트를 구하는 쉬운 문제임을 알게 되었다. 동욱이는 재현이에게 ”이거 깊이 우선 탐색으로 풀면 돼?” 라고 물었다. 재현이는 아무 대답도 하지 않았다. 당신은 어떻게 생각하는가?<br/>


## 입력
첫 번째 줄에 순열의 길이 n (1 ≤ n ≤ 1, 000, 000)이 주어진다.<br/>
두 번째 줄에 n개의 공백으로 구분된 정수가 주어진다. 순열의 원소 a1, a2, ..., an 을 뜻한다.<br/>


## 출력
첫 번째 줄에 구한 집합의 개수 m을 출력한다.<br/>
이후 m개의 줄에 걸쳐 각각의 집합을 출력한다. 첫 번째로 집합의 크기 si를 출력하고, 이후 그 집합에 속한 si개의 정점의 번호를 공백으로 구분하여 출력한다. 정점의 번호는 오름차순으로 출력한다.<br/>
여러 개의 집합을 출력할 때, 집합에 속한 가장 작은 번호의 정점을 기준으로 오름차순으로 출력하라.<br/>


## 예제 입력
4<br/>
2 3 1 4<br/>


## 예제 출력
2<br/>
3 1 2 3<br/>
1 4<br/>


## 풀이
앞에서부터 규칙성을 확인했다.<br/>


현재 값을 k라 하면, 남은 것 중 k보다 가장 작은 min = 1과 k는 연결된다.<br/>
그리고 min 과 연결된 것 중 가장 큰 값을 max라 하자.<br/>
그러면 min에서 max 사이의 수는 모두 같은 연결성을 가진다.<br/>


이후 다음 집합의 경우 max + 1 = min'이 될 것이고 다시 앞과 같이 max'가 발견되어,<br/>
min'에서 max' 사이의 수는 모두 같은 연결성을 가질 것을 알 수 있다.<br/>


그래서 앞에서부터 min, max를 찾아가며 수를 그룹짓는다.<br/>
그리고 min이 나오면 min 값을 올려간다.<br/>
이렇게 min이 max를 넘어가는 순간 그룹이 맺어지는 것이다.<br/>


그룹의 갯수를 세어줘야 하기에 초기 min과 max의 값을 기록한다.<br/>
그런데 그룹이 만들어지는 과정을 보면 max는 증가수열임이 보장된다.<br/>
그리고 다음 min은 이전 max에 +1임을 알 수 있어 max만 저장했다.<br/>


이렇게 모든 그룹의 갯수를 찾고 조건에 맞게 출력하면 된다.<br/>


다만 그룹마다 출력되게 코드를 구성하니 시간초과 났다.<br/>
아마 테스트 케이스 중에 그룹의 길이가 1짜리 케이스가 있는거 같다.<br/>


## 문제 링크
https://www.acmicpc.net/problem/7982