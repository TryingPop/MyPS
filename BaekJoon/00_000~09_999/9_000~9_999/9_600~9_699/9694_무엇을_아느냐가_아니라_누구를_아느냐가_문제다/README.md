# C#

## 난이도 : 골드 5

## 알고리즘 분류
  - 게임 이론

## 제한조건
  - 시간 제한 : 1초
  - 메모리 제한 : 128 MB

## 문제
한신이는 젊고, 똑똑하고 매우 유명한 정치인이다. 그럼에도 그는 여전히 자신의 성공을 위해서도 인간관계는 중요한것이라고 믿고있다. 다음달에 열릴 국회의원선거에서 한신이는 자신의 당이 반드시 이기길 희망한다. 그러기 위해서 최고의원의 지지가 필요하다.<br/>
이 최고의원의 지지를 받기위해 한신이는 전략을 세웠다. 그는 그 최고의원을 직접적으로 만날수 없다면 그를 알고있는 인맥을 이용하여 만날것이다. 이것을 위해서 우선 정치인들의 친밀도를 조사하였는데 친밀도를 다음 4단계로 나누어서 기록해놓았다.<br/>
최측근 [1] / 측근 [2] / 비즈니스관계 [3] / 지인 [4]<br/>
[두 사람의 관계는 이 4가지 경우중 반드시 해당되며, 적(enemy)는 존재하지 않는다.]<br/>
한신이는 지인보다는 최측근 친구에게 소개받기 원한다. 그래서 최고의원을 만나기까지의 인맥간 친밀도의 합을 최소화하고 싶어한다.<br/>
N명의 정치인 명단으로부터 그들의 인맥 친밀도가 주어진다. 정치인 리스트를 보고 한신이가 최고의원을 만나기까지의 친밀도의 합 중에서 가장 작은 값을 구하면 된다.<br/>


## 입력
맨위 첫 번째 줄에 T(1 <T< 100)는 테스트케이스 수를 의미한다. 이것을 따라 다음줄에 각 테스트 케이스가 주어지는데, 첫 번째 줄에는 N과 M이 주어진다. N(N ≤ 20)은 관계의 개수를 의미하며, M(5 ≤M≤ 20)은 정치인의 수를 나타낸다. 이 다음 N줄에는 정치인 x, 그의 친구 y (0 ≤x,y< M), 두사람간의 친밀도 z(1 ≤z≤ 4)를 입력받는다. 정치인 0번은 한신이를 나타내고 M-1은 최고의원을 의미한다.<br/>


## 출력
각 테스트 케이스는 "Case #x: "의 형식으로 출력되며 x는 케이스 번호(1부터 시작)을 의미한다. 콜론뒤에 한신이가 최고의원을 만날수 있다면 0번 정치인(한신이)를 시작으로 M-1번 정치인(최고의원)까지 만난 순서대로 출력하면 되고, 최고의원을 만날수 없는 경우엔 -1을 출력하면 된다.<br/>


## 예제 입력
2<br/>
7 5<br/>
0 1 2<br/>
1 3 4<br/>
0 2 1<br/>
0 4 3<br/>
3 2 3<br/>
3 4 4<br/>
2 4 1<br/>
3 5<br/>
0 1 2<br/>
1 3 4<br/>
4 2 1<br/>


## 예제 출력
Case #1: 0 2 4<br/>
Case #2: -1<br/>


## 풀이
문제는 사람을 노드로, 사람 간 친분 관계를 양방향 간선으로, 친한 정도를 가중치로 표현한 그래프 문제이다.<br/>
친할수록 가중치가 작아지므로, 한신에서 최고의원까지의 친밀도 합이 가장 작은 경로는 가중치의 합이 최소인 경로와 같다.<br/>
이는 양의 가중치만 존재하는 그래프에서의 최단 경로 문제로 모델링할 수 있다.<br/>
따라서 다익스트라 알고리즘을 이용해 최단 경로를 계산했다.<br/>


경로 복원을 위해 `back[cur] = prev` 형식으로 각 노드의 이전 노드를 기록했다.<br/>
이후 목표 지점(최고의원)에서부터 시작점(한신)까지 `back`을 따라 역추적하면 경로를 얻을 수 있다.<br/>
이때 경로는 역순으로 저장되므로, 리스트에 저장한 뒤 `Reverse()`하면 실제 최단 경로가 된다.<br/>


목적지 최고의원의 거리 값을 통해 목적지 도착여부를 확인했다.<br/>
도착했을 경우 목적지 최고의원에서 back 배열을 이용해 경로를 찾았다.<br/>
back 배열을 저장할 때 도착 지점을 cur, 시작 지점을 prev로 하고 back[cur] = prev가 되게 했다.<br/>
그래서 찾아가는 값은 도착지점을 통해 시작지점을 찾기에 순차적으로 찾아가면 역순으로 저장된다.<br/>
먼저 들어온게 가장 나중에 나가는 FILO 자료 구조인 스택처럼 저장해 읽으면 최단 경로를 찾을 수 있다.<br/>


한 가지 문제는 입력에서 발생한 런타임 에러였다.<br/>
초기 제출에서 `FormatException`이 발생했는데, 이는 입력에 숫자 이외의 문자가 포함되어 있었기 때문이다.<br/>
질문 게시판을 통해 `'\t'`(탭 문자)가 포함되어 있음을 알게 되었고, 이를 해결하기 위해 숫자 입력 시 `'0' ~ '9'` 사이인지 직접 확인해 파싱하는 방식으로 수정하였다.<br/>


구현 시 시작점과 도착점을 바꾸면 경로 추적이 정방향이 되어 `Reverse()` 없이도 출력 가능하다.<br/>
한신에서 최고의원으로 가는 대신 최고의원에서 한신까지 경로를 구하고 출력 순서를 그대로 사용하면 된다.<br/>


## 문제 링크
https://www.acmicpc.net/problem/9694