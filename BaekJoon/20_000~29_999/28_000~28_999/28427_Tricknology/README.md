# C#

## 난이도 : 골드 3

## 알고리즘 분류
  - 수학
  - 정수론
  - 누적 합
  - 소수 판정
  - 에라토스테네스의 체

## 제한조건
  - 시간 제한 : 1초
  - 메모리 제한 : 1024 MB

## 문제
다음 쿼리를 수행하는 프로그램을 작성하시오.<br/>
  - L R: L ≤ x < y ≤ R을 만족하는 정수 x, y에 대하여, x ≤ k ≤ y를 만족하는 모든 자연수 k의 합이 소수가 되게 하는 모든 정수 쌍 (x, y)의 개수를 출력한다.


## 입력
첫째 줄에 쿼리의 개수 Q가 주어진다. (1 ≤ Q ≤ 500,000)<br/>
다음 Q개의 줄에는 각각의 쿼리를 나타내는 양의 정수 L, R이 주어진다. (2 ≤ L < R ≤ 500,000)<br/>


## 출력
각각의 쿼리마다 한 줄에 하나씩 정답을 출력한다.<br/>


## 예제 입력
4<br/>
2 4<br/>
3 8<br/>
7 12<br/>
9 21<br/>


## 예제 출력
2<br/>
3<br/>
3<br/>
6<br/>


## 풀이
(x, y)가 길이 3 이상에 대해서 합성수임을 알면 쉽게 풀린다.<br/>


먼저 길이가 3이상인 홀수인 경우 중앙값을 z라 하자.<br/>
그러면 (x, y)의 원소들은 z - k, z - k + 1, ..., z - 1, z, z + 1, ..., z + k로 표현할 수 있다.<br/>
이제 이 수들을 모두 합하면 z x (2 * k + 1)이므로 2 * k + 1로 나눠떨어진다.<br/>
이는 합한 값이 합성수임을 뜻한다. 그리고 2 * k + 1는 (x, y)의 길이이다.<br/>


이제 길이가 4이상인 짝수인 경우라 하자.<br/>
그러면 (x, y)의 원소는 다음과 같이 표현된다.<br/>
x, x + 1, ..., x + 2k - 1이다.<br/>
이들을 합하면 x * (2k) + k * (2k - 1)이다.<br/>
길이가 4 이상이므로 k ≥ 2이상이고 x * (2k) + k * (2k - 1)는 k로 나눠떨어지므로 합성수가 된다.<br/>


그래서 길이가 3이상이면 합성수가되어 확인할 필요가 없다.<br/>
그리고 문제 조건에서 x ≠ y이므로 최소 길이는 2이다.<br/>
그래서 길이 2에서 소수의 갯수를 세어주면 된다.<br/>


쿼리가 많아 에라토스테네스의 체로 가능한 범위의 모든 소수를 찾는다.<br/>
가능한 범위는 2 ≤ x 이므로 길이 2인 합의 최솟값은 5이고, y ≤ 500,000이므로 최댓값은 999,999가 된다.<br/>
이렇게 100만 미만의 모든 소수를 찾고, 누적 합으로 갯수를 관리한다.<br/>
그러면 sum[B] - sum[A - 1]이 A \~ B사이의 소수의 갯수가 된다.<br/>


x, y를 A = 2x + 1, B = 2y - 1로 변환한 뒤 배열을 이용하면 각 쿼리당 O(1)에 찾을 수 있다.<br/>


## 문제 링크
https://www.acmicpc.net/problem/28427