# C#

## 난이도 : 골드 3

## 알고리즘 분류
  - 브루트포스 알고리즘
  - 비트마스킹

## 제한조건
  - 시간 제한 : 1초
  - 메모리 제한 : 512 MB

## 문제
MBTI가 E(외향형)인 탐험가 백남이는 미지의 보물이 숨겨져 있다는 피라미드를 탐사 중이다. 무시무시한 함정들을 지나서 보물이 있는 방을 찾았지만, 보물상자를 열기 위해서는 수수께끼를 풀어야만 했다.<br/>
수수께끼의 내용은 다음과 같다.<br/>

  - 양면이 검은색과 흰색으로 칠해진 돌이 있다.
  - 돌은 빠짐없이 N x N 격자에 검은색 또는 흰색이 보이게 놓여 있다.
  - 모든 돌을 같은 색으로 바꾸는 데 걸리는 시간을 구하여라.


그리고 백남이는 다음 중 하나의 행동을 할 수 있다. 각 행동을 하는 데 1초가 걸린다.<br/>

  1. 격자의 행 또는 격자의 열을 골라 해당 줄을 전부 뒤집는다.
  2. 돌 하나를 뒤집는다.


보물상자를 여는 데 걸리는 최소 시간을 구함으로써, 백남이가 무사히 보물을 얻게 도와주자!<br/>


## 입력
첫 줄에 격자판의 행의 수이자 열의 수인 N 이 주어진다. (1≤ N ≤ 8)<br/>
둘째 줄부터 N 개의 줄에 걸쳐 현재 각 격자의 색을 나타내는 숫자가 주어진다.<br/>
N 개의 줄 중에서 i 번째의 줄의 j 번째 숫자는 i 행 j 열 격자의 색을 나타내며 '0'인 경우 검은색, '1'인 경우 흰색임을 나타낸다.<br/>


## 출력
모든 돌을 같은 색으로 바꾸는 데 걸리는 최소 시간을 구하여라.<br/>


## 예제 입력
8<br/>
0 0 0 0 0 0 1 0<br/>
1 1 1 1 1 1 1 1<br/>
0 0 0 0 0 0 1 0<br/>
0 0 0 0 0 0 1 0<br/>
0 0 0 0 0 0 1 0<br/>
0 0 0 0 0 0 1 0<br/>
0 0 0 0 0 0 1 0<br/>
0 0 0 0 0 0 1 0<br/>


## 예제 출력
3<br/>


## 풀이
뒤집는 순서에 상관없이 같은 행 또는 같은 열을 2번 뒤집는 경우 뒤집기 전의 상태와 같다.<br/>


i행을 뒤집는 경우는 i행을 제외한 행을 뒤집는 경우나 열을 뒤집는 경우로 만들 수 없다. 열 역시 마찬가지다.<br/>
그리고 뒤집는 순서에 대해 교환법칙이 성립한다. 그래서 각 행과 열은 독립이라 봐도 된다.<br/>


행과 열은 많아야 8가지이므로 행과 열을 뒤집는 경우는 많아야 2^16 = 65536가지가 있다.<br/>
그리고 맵을 전체 확인하는 경우 64 이고 이는 64 * 65536 = 4_194_304이다.<br/>
그래서 뒤집고 맵을 모두 확인하는 브루트포스가 유효하다.<br/>


모든 뒤집는 경우를 조사하기에 적은 돌들은 하나씩 뒤집어 최소 횟수를 찾을 수 있다.<br/>
즉, 뒤집는 횟수 + 적은 돌들의 갯수가 색을 통일하는 횟수가 된다.<br/>


맵의 크기는 커봐야 64개이고 색은 2가지 뿐이므로 8 바이트에 비트마스킹하면 모두 표현할 수 있다.<br/>
그래서 비트마스킹으로 맵의 상태를 표현하고, 뒤집는 연산역시  비트마스킹으로 했다.<br/>


## 문제 링크
https://www.acmicpc.net/problem/23058