# C#

## 난이도 : 골드 4

## 알고리즘 분류
  - 다이나믹 프로그래밍

## 제한조건
  - 시간 제한 : 1초
  - 메모리 제한 : 1024 MB

## 문제
은소마는 현재 알 수 없는 방에 갇혀 있다. 각 방에는 한 개의 수가 적혀 있고, 아래쪽, 오른쪽으로 향하는 문만 열려, 그 방향으로만 갈 수 있다고 한다. 그런데, 중간에 큰 벽 한 개가 가로막고 있어 문이 없는 경우도 있다. 은소마는 불안한 마음에 지나온 수들을 모두 더하며 오른쪽 맨 아래 마지막 방까지 나아가려고 한다. 현재 은소마는 가장 왼쪽 위 방에 있다. 은소마가 마지막 방에 도착할 때까지 수를 더해서 얻을 수 있는 합의 최댓값은 얼마일까?<br/>


## 입력
첫 번째 줄에 방의 크기 N, M이 주어진다. (2 ≤ N,M ≤ 1000)<br/>
두 번째 줄부터 N개의 줄에 각 방에 적혀 있는 수 a_{i,1}, a_{i,2}, ..., a_{i, M}이 공백으로 구분되어 주어진다. (-1000 ≤ a_{i,j} ≤ 1000)<br/>
벽은 직선으로 주어지며, 혼동을 방지하기 위해 방 꼭짓점에 다음과 같이 번호를 부여한다.<br/>
N+2 번째 줄에 x_1, y_1, x_2, y_2가 공백으로 구분되어 주어진다. (0 ≤ x_1, x_2 ≤ N; 0 ≤ y_1, y_2 ≤ M; x_1=x_2 또는 y_1=y_2) 이는 (x_1, y_1)부터 (x_2, y_2)까지 벽이 있음을 의미한다. 벽은 없을 수도 있다. 이때는 (x_1,y_1) = (x_2,y_2)으로 주어진다.<br/>
입력으로 주어지는 모든 수는 정수이다.<br/>


## 출력
마지막 방에 도착했을 때, 은소마가 얻을 수 있는 합의 최댓값을 출력한다. 영원히 마지막 방에 도달할 수 없다면, "Entity"를 출력한다.<br/>


## 예제 입력
4 6<br>
1 3 3 10 3 5<br>
8 1 8 7 6 9<br>
10 2 2 3 7 2<br>
6 3 1 2 10 1<br>
2 1 2 4<br>


## 예제 출력
49<br>


## 풀이
이동할 수 있는 방향이 오른쪽과 아래 뿐이다.<br/>
그래서 둘러서(순회해서)오는 경우는 고려하지 않아도 된다.<br/>
즉 BFS 형식으로 최소가 되게 진행하면 많아야 2번 탐색함을 알 수 있다.<br/>
경로상에 거울이 있으면 해당 방향으로 이동못한다.<br/>


그래서 이동 방향에 거울이 있어 못지나가는지 확인하고, 진행하면 된다.<br/>
주의할 것은 거울의 점이 양끝점만 나타낼 뿐 정렬된 상태라는 보장은 없다.<br/>


예제 표의 일부분이다.<br/>
여기서 거울이 있어 못지나가는 곳은 파란 선이 있는 곳이다.<br/>

||0||1||2||3||4||5|
|:---:|:---:|:---:|:---:|:---:|:---:|:---:|:---:|:---:|:---:|:---:|:---:|
|0|┼|─|┼|─|┼|─|┼|─|┼|─|┼|
||│|1|│|3|│|3|│|10|│|3|│|
|1|┼|─|┼|─|┼|─|┼|─|┼|─|┼|
||│|8|│|1|│|8|│|7|│|6|│|
|2|┼|─|┼|${\textsf{\color{blue}─}}$|┼|${\textsf{\color{blue}─}}$|┼|─|┼|─|┼|
||│|10|│|2|│|2|│|3|│|7|│|
|3|┼|─|┼|─|┼|─|┼|─|┼|─|┼|


## 문제 링크
https://www.acmicpc.net/problem/26259