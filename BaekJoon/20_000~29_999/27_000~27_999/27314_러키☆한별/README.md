# C#

## 난이도 : 골드 3

## 알고리즘 분류
  - 그래프 이론
  - 브루트포스 알고리즘
  - 그래프 탐색
  - 너비 우선 탐색

## 제한조건
  - 시간 제한 : 2초
  - 메모리 제한 : 1024 MB

## 문제
한별이는 운이 매우 좋다!<br/>
한별이는 벽, 다른 사람들, 그리고 여러 개의 출구가 있는 미로를 탈출하고자 한다.<br/>
미로 내에서 한별이와 다른 사람들은 매 순간 상하좌우 중 한 방향으로 한 칸 이동할 수 있다. 또, 한별이가 아닌 다른 사람들은 멈춰있을 수도 있다. 벽이 있는 칸으로 이동하거나 미로 격자 밖으로 나가는 것은 불가능하다. 여러 명이 같은 칸에 있는 것은 가능하다.<br/>
한별이를 제외한 사람들은 모두 한별이에게 줄 선물을 하나씩 가지고 있다. 만약 한별이와 선물을 가진 사람이 같은 칸에 있으면, 그 사람은 한별이에게 선물을 준다.<br/>
한별이는 한별이가 도달할 수 있는 미로의 출구 중 하나를 골라 이로 향하는 최단경로 중 하나를 고르고, 이를 따라 이동한다. 한별이를 제외한 다른 사람들은 한별이의 경로를 알고, 한별이에게 선물을 주기 위한 최적의 경로로 이동한다.<br/>
한별이가 어떤 칸에서 다른 칸으로 이동하면, 도착한 칸에 이미 있던 사람들과, 그 칸에 한별이와 동시에 도착한 사람들에게 선물을 받는다. 그 뒤 만약 도착한 칸이 한별이가 처음에 정한 출구면, 즉시 미로를 탈출한다. 다른 사람들은 어떤 출구에 도착해도 미로를 탈출하지 않는다.<br/>
한별이는 운이 매우 좋기 때문에, 항상 가능한 최대의 선물을 받는다. 한별이가 출구와 최단경로를 적절히 고르고, 사람들이 적절히 움직였을 때 한별이가 받을 수 있는 선물의 최대 개수를 구하시오.<br/>


## 입력
첫 번째 줄에 미로의 높이 N과 너비 M이 공백으로 구분되어 주어진다. (1 ≤ N, M, N x M ≤ 100,000)<br/>
다음 N개의 줄에 미로의 정보가 길이 M인 문자열로 주어진다.<br/>
문자열에서 H는 한별이를 뜻하고, 미로 안에 정확히 한 번 나타난다.<br/>
문자열에서 P는 한별이가 아닌 다른 사람을 뜻하고, 미로 안에 최소 1번, 최대 100번 나타난다.<br/>
문자열에서 #은 출구를 뜻하고, 미로 안에 최대 100번 나타난다.<br/>
문자열에서 .는 빈 공간을 뜻한다.<br/>
문자열에서 X는 벽을 뜻한다.<br/>
한별이가 도달할 수 있는 출구가 하나 이상 존재함이 보장된다.<br/>


## 출력
한별이가 받을 수 있는 선물의 최대 개수를 출력한다.<br/>


## 예제 입력
4 4<br/>
\#PPH<br/>
X\.\.P<br/>
PPPP<br/>
\#XXX<br/>


## 예제 출력
7<br/>


## 풀이
한별이는 문으로 최단 경로로 이동을 하므로 BFS 탐색을 통해 최단 경로에 걸리는 시간을 찾는다.<br/>
맵의 크기가 10칸 이하이고, 문은 100개를 안넘으므로 둘이 곱해도 1000만이라 모든 문에 대해 BFS를 해볼만하다 판단했다.<br/>
그래서 한별이가 방문한 문에 대해 BFS 탐색을 했다.<br/>


이제 각 사람들의 위치를 100번이나 확인하므로 사람들의 좌표를 미리 저장해놓는다.<br/>
여기서 문과 사람과의 거리가 한별이보다 앞서는 경우 그사람은 문으로 가서 대기하면 한별이와 사람은 만날 수 있다.<br/>
그래서 문과 한별이의 거리 이하인 사람들에 대해 캔디를 받는다.<br/>


이렇게 모든 한별이가 방문할 수 있는 문에 대해 캔디 수를 찾고 이 중 최댓값을 출력했다.<br/>


사람들도 100명이므로 각 사람들을 기준으로 문을 조사해도 된다.<br/>
이 경우 문들에 대한 거리를 모두 찾아주고 기록해야 하기에 메모리를 더쓰게 된다.<br/>


그리고 한별이로 BFS 탐색을 생략해도 된다.<br/>
이 경우는 각 문에 대해 한별이의 방문여부를 모르기에 모든 문에 BFS를 해야 한다.<br/>
이 경우 문의 갯수만큼 BFS를 무조건한다.<br/>


한별이가 방문할 수 있는 문을 조사하는 BFS 탐색 1회가 추가되는데 100회중 1회이기에 1%정도 연산이 늘어날 뿐이라 감안할만하다 생각했다.<br/>
그리고 방문하지 못하는 문이 많을 때 체크하는게 효율이 좋아 진다.<br/>


## 문제 링크
https://www.acmicpc.net/problem/27314