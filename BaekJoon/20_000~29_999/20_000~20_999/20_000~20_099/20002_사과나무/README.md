# C#

## 난이도 : 골드 5

## 알고리즘 분류
  - 브루트포스 알고리즘
  - 누적 합

## 제한조건
  - 시간 제한 : 1초
  - 메모리 제한 : 512 MB

## 문제
N × N 크기의 정사각형 모양 과수원이 있고, N × N 개의 사과나무가 1 × 1 크기의 간격으로 모든 칸에 심어져있다.<br/>
농부 형곤이가 가을을 맞아 사과를 수확하려는데, 땅주인 신영이가 "너는 과수원 내에 사과나무를 K × K 의 크기의 정사각형 모양으로만 수확해 가져갈 수 있어, 이때 K는 1보다 크거나 같고 N보다 작거나 같은 정수라구! 나머지는 내가 먹을께! 하하!" 라고 통보했다.<br/>
하나의 사과나무를 수확할 때, 사과를 통해 얻을 수 있는 이익과 노동비로 빠져나가는 손해가 동시에 이루어진다.<br/>
그래서 형곤이는 나무의 위치를 좌표로 하여, 사과를 통해 얻은 이익과 노동비를 더한 총이익을 2차원 배열의 형태로 정리했다.<br/>
악독한 땅주인 신영이로부터 고통받는 귀여운 형곤이에게 최대 총이익을 안겨주고 싶은 당신, 형곤이를 도와주자!<br/>


## 입력
첫 번째 줄에는 과수원의 크기 N이 주어진다. (1 ≤ N ≤ 300)<br/>
두 번째 줄부터 N + 1번째 줄까지, 해당 나무를 수확했을 때 얻을 수 있는 총이익을 표시한다.<br/>
총이익은 -1,000보다 크거나 같고, 1,000보다 작거나 같은 정수이다.<br/>


## 출력
첫 번째 줄에 최댓값을 출력한다.<br/>


## 예제 입력
4<br/>
-1 -2 -3 -4<br/>
5 6 7 8<br/>
9 10 11 12<br/>
-13 -14 -15 -16<br/>


## 예제 출력
45<br/>


## 풀이
각 k에 대해 모든 k x k 정사각형 총합을 브루트포스로 찾기에는 매 길이마다 N^2 x k^2의 시간이 걸리고 이는 O(N^5)으로 시간초과 나기 좋다.<br/>
슬라이딩 윈도우를 이용해 접근하는 경우 길이 k인 경우 N^2 x k의 시간이 걸리고이는 O(N^4)으로 역시 시간초과 날 확률이 높다.<br/>


그런데 누적 합 아이디어를 이용하면 간단하게 구현할 수 있다.<br/>
O(N^3)에 구현할 수 있다.<br/>


sum[i][j] = val를 0, 0부터 i, j까지 있는 값들의 합이 되게 배열 sum을 설정하면 된다.<br/>
그러면 왼쪽 끝이 a, b이고 오른쪽 아래가 c, d인 경우 sum[c][d] + sum[a - 1][b - 1] - sum[a - 1][d] - sum[c][b - 1]이된다.<br/>


해당 배열을 만드는 방법은 행마다 열을 누적해준다. 방향은 아래 표와 같다.<br/>

|→|→|→|
|:---:|:---:|:---:|
|→|→|→|
|→|→|→|

그리고 만들어진 배열의 각 열에 대해 행을 누적해주면 된다.<br/>

|↓|↓|↓|
|:---:|:---:|:---:|
|↓|↓|↓|
|↓|↓|↓|


진행 순서는 바껴도 상관없다.<br/>


이렇게 배열을 연산하면 O(N^2)의 시간이 걸린다.<br/>
이제 각 길이에 대해 최대인 정사각형들을 조사하면 O(N^3)의 시간으로 해결된다.<br/>


## 문제 링크
https://www.acmicpc.net/problem/20002