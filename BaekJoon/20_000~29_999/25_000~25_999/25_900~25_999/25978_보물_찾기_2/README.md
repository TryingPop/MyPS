# C#

## 난이도 : 골드 3

## 알고리즘 분류
  - 그래프 이론
  - 그래프 탐색
  - 너비 우선 탐색
  - 최단 경로
  - 데이크스트라
  - 격자 그래프
  - 0-1 너비 우선 탐색

## 제한조건
  - 시간 제한 : 1초
  - 메모리 제한 : 512 MB

## 문제
건덕이는 지난 보물찾기에서 보물을 찾는 데 성공했다. 이제는 배를 타고 세계 곳곳을 누비며 보물을 찾아 나서는 보물 탐사대가 되었다.<br/>
건덕이는 주변 섬들의 지형이 담긴 가로 W칸, 세로 H칸의 지도를 구했다. 지도에는 주변 바다의 지형이 나타나 있다. 바다와 암초로 이루어져 있는데, 배는 암초 위를 지나다닐 수 없다. 지도의 가장 왼쪽 위는 (1, 1), 오른쪽 아래는 (H, W)이다.<br/>
건덕이의 배는 매번 인접한 8칸 중 한 곳으로 이동할 수 있다. (r, c)와 인접한 칸은 max(|r-x|, |c-y|) = 1인 (x, y) 이다. 안전한 항해를 위해 지도 바깥으로는 나가지 않는다.<br/>
바다의 물살이 지도 기준 왼쪽에서 오른쪽으로 빠르게 흐르고 있어서, 물살을 타고 가는 데에는 연료가 들지 않지만, 그 외에는 한 칸당 1의 연료가 소모된다. 예를 들어, 건덕이가 현재 (r, c) 위치에 자리 잡고 있다면 (r-1, c+1), (r, c+1), (r+1, c+1)로는 연료 소모 없이 이동할 수 있고, 그 외의 칸으로는 1의 연료를 소모해야 한다.<br/>
건덕이의 손에 보물지도가 주어졌다. 보물을 찾기까지 소모해야 하는 연료의 최솟값을 구해 주자!<br/>


## 입력
첫 번째 줄에 보물 지도의 세로 길이 H, 가로 길이 W가 주어진다.(3 ≤ H, W ≤ 500)<br/>
두 번째 줄부터 H개의 줄에 걸쳐 지도가 주어진다. 지도는 .#*K 중 하나로만 나타내져 있으며, 각각 바다, 암초, 보물, 배를 의미한다. 배와 보물은 지도에 한 번만 주어진다.<br/> 


## 출력
물살을 헤쳐 보물을 찾기까지 소모하는 연료의 최솟값을 출력한다. 도달할 수 없는 경우에는 -1을 출력한다.<br/>


## 예제 입력
3 5<br/>
\.\.\.\.\*<br/>
K\.\#\.\.<br/>
\#\.\.\.\#<br/>


## 예제 출력
0<br/>


## 풀이
8방향 이동이 가능하다. 그리고 오른쪽 방향으로 이동하는 경우 비용이 들어가지 않는다.<br/>
단순 BFS 로 접근하면 현재 좌표가 최단 경로임이 보장이 안된다.<br/>


반면 오른쪽 이동은 같은 거리이므로 우선적으로 처리한다면 BFS로 최단 경로를 찾을 수 있다.<br/>
오른쪽 방향을 앞에, 왼쪽 방향은 뒤에 넣는 덱을 이용해 풀어도 되지만 큐를 2개둬서 풀었다.<br/>


cur 큐는 현재 이동을, next 큐는 다음 이동을 담는다.<br/>
그래서 오른쪽 이동은 cur 큐에 넣고, 오른쪽이 아닌 이동은 next 큐에 넣었다.<br/>
사용 에너지 역시 next 큐에 들어간 경우 현재 + 1을 해주고 오른쪽 이동은 현재 값을 그대로 넣었다.<br/>


cur 큐가 비면 이제 next 큐와 교체(Swap)하면서 다음턴을 나타냈다.<br/>
이렇게 BFS로 최단 경로를 찾아갔다.<br/>


## 문제 링크
https://www.acmicpc.net/problem/27978