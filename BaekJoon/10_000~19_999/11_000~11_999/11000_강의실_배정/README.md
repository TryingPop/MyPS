# C#

## 난이도 : 골드 4

## 알고리즘 분류
  - 자료 구조
  - 그리디 알고리즘
  - 정렬
  - 우선순위 큐

## 제한조건
  - 시간 제한 : 1초
  - 메모리 제한 : 256 MB

## 문제
수강신청의 마스터 김종혜 선생님에게 새로운 과제가 주어졌다.<br/>
김종혜 선생님한테는 Si에 시작해서 Ti에 끝나는 N개의 수업이 주어지는데, 최소의 강의실을 사용해서 모든 수업을 가능하게 해야 한다.<br/>
참고로, 수업이 끝난 직후에 다음 수업을 시작할 수 있다. (즉, Ti ≤ Sj 일 경우 i 수업과 j 수업은 같이 들을 수 있다.)<br/>
수강신청 대충한 게 찔리면, 선생님을 도와드리자!<br/>


## 입력
첫 번째 줄에 N이 주어진다. (1 ≤ N ≤ 200,000)<br/>
이후 N개의 줄에 Si, Ti가 주어진다. (0 ≤ Si < Ti ≤ 10^9)<br/>


## 출력
강의실의 개수를 출력하라.<br/>


## 예제 입력
3<br/>
1 3<br/>
2 4<br/>
3 5<br/>


## 예제 출력
2<br/>


## 풀이
시간 별로 강의가 가장 많이 겹치는 값이 최소한으로 강의실을 할당하는 것과 같음을 알 수 있다.<br/>
그리고 시작 시간은 항상 끝 시간보다 작음이 보장되므로 한 시간에 강의가 바로 끝나는 경우는 없다.<br/>
기본적으로 시작 시간에 +1을 끝 시간에 -1을 해주면 누적 합 개념으로 찾을 수 있다.<br/>


하지만 시간의 범위가 10억까지 온다.<br/>
10억 시간을 배열로 할당하거나, 1씩 누적해 가는 것은 시간초과가 날 수 있다.<br/>


누적 합은 주어진 시간들에서만 값의 변화가 일어난다.<br/>
이를 해결하기 위해 좌표 압축으로 각 값을 40만 이하의 수로 나타낼 수 있다.<br/>
이러면 40만 배열이 할당되고 누적합을 충분히 쓸만하다.<br/>


여기서는 배열을 하지 않고 순차적으로 읽으면서 값이 갱신될 때마다 배열에 들어갈 값을 구했다.<br/>
그리고 이 최댓값을 정답으로 제출했다.<br/>


처음에는 시작과 끝을 따로 bool 변수를 추가해 ValueTuple로 배열을 했는데, 시간의 범위가 10억 이하로 2배를 해도 int 범위에 들어간다.<br/>
그래서 각 시간을 2배를 해준다.<br/>
끝시간이 갱신된 다음에 시작 시간이 갱신되어야 하므로 시작 시간에는 +1을 해준다.<br/>
이렇게 문제 조건을 이용해 ValueTuple이 아닌 int로 해결하니 속도가 50% 빠르다.<br/>


다른 사람의 풀이를 보니 우선순위 큐를 쓰는데, 아이디어는 같고 접근 방법만 다를 뿐이다.<br/>
우선순위 큐의 방법은 강의들을 시작 시간으로 강의를 우선 순위 큐 pq1에 넣는다.<br/>
그리고 끝 시간을 진행 중의 강의 표시로 다른 우선순위 큐 pq2에 넣는다.<br/>
pq1 의 형태는 PriorityQueue<(int s, int e), int>의 형태이고, pq2는 PriorityQueue<int, int>의 형태이다.<br/>
그러면 pq2는 시작 시간 이하인 끝시간의 강의 는 빼낸다.<br/>
이후에 pq2의 크기가 진행 중인 강의의 갯수와 같다.<br/>
이렇게 진행하면서 pq2의 최댓값을 찾는다.<br/>


## 문제 링크
https://www.acmicpc.net/problem/11000