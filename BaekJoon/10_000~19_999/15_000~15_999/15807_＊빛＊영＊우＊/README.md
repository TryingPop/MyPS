# C#

## 난이도 : 플레티넘 5

## 알고리즘 분류
  - 누적 합

## 제한조건
  - 시간 제한 : 1초
  - 메모리 제한 : 512 MB

## 문제
사람들은 영우를 존경한다. 영우를 아는 사람이라면 모두 존경할 수 밖에 없는 사실이지만, 안타깝게도 아직도 영우를 모르는 사람들이 있다는 것이 문제다.<br/>
윤호는 그 사실이 불편했다. 따라서 모두가 영우를 알 수 있도록 영우가 출몰하는 곳곳에 라이트를 설치하여 스포트라이트를 받게 하려 한다. 모든 라이트를 켠 후 윤호는 영우가 나타났을 때 얼마나 빛날지 궁금했다.<br/>


||0|1|2|3|4|5|6|7|8|9|10|
|:---:|:---:|:---:|:---:|:---:|:---:|:---:|:---:|:---:|:---:|:---:|:---:|
|0|||||||L2|||||
|1||||L1||↙||↘||||
|2|||↙||X||||↘|||
|3||A||↙||↘||||↘||
|4|↙||↙||||↘||C||↘|
|5||↙|||B|||↘||||
|6|↙||||||||↘|||
|7||||||||||↘||
|8|||||||||||↘|


윤호가 설치한 라이트의 위치가 주어진다. 라이트는 항상 북쪽(y 좌표가 증가하는 방향) 방향으로 90도 각도로 비추고 있으며, 아무리 멀어도 빛의 세기는 약해지지 않는다. 윤호가 설치한 라이트는 빛의 세기가 중첩된다. 즉, 2개의 라이트에게 빛을 받는 영역의 세기는 2이고, 3개의 라이트에게 빛을 받는 영역의 세기는 3이 된다.<br/>
위의 그림 같은 경우에는 A는 1, B의 경우에는 2, C의 경우에는 1의 세기를 가지고 있다.<br/>
라이트가 위치한 곳도 그 라이트의 빛을 받는 영역이다.<br/>


## 입력
프로그램의 입력은 표준 입력으로 받는다. 라이트의 개수 N(1 ≤ N ≤ 10^5) 이 주어지고, 그 다음 N줄에 걸쳐 라이트의 위치를 나타내는 좌표인 두 정수 Xi, Yi (-1500 ≤ Xi, Yi ≤ 1500)가 주어진다.<br/>
그 다음 P(1 ≤ P ≤ 10^5)가 주어진다. 이어서 P개의 줄에 걸쳐서 Xpi , Ypi (-1500 ≤ Xpi, Ypi ≤ 1500)가 주어지는데, 이는 윤호가 빛의 세기를 알고 싶어하는 지점들의 X좌표, Y좌표이다.<br/>


## 출력
프로그램의 출력은 표준 출력으로 한다. P개의 수를 한 줄당 하나씩 출력한다. i번째 줄에는 지점 (Xpi, Ypi)의 빛의 세기를 출력하면 된다.<br/>


## 예제 입력
2<br/>
3 1<br/>
6 0<br/>
3<br/>
1 3<br/>
4 5<br/>
8 4<br/>


## 예제 출력
1<br/>
2<br/>
1<br/>


## 풀이
y = x, y = -x 직선과 평행하게 빛이 뻗어 나간다.<br/>
(x, y)의 좌표를 다음과 같이 (a = y - x, b = x + y)로 변형하면 a = 0, b = 0과 평행한 방향으로 빛이 뻗어 나간다.<br/>
그리고 위상 동형이므로 연결성은 변하지 않는다.<br/>
그래서 변경된 좌표로 정답을 찾는다.<br/>


변형된 좌표계에서 영우가 출현하는 좌표를 c, d라하고 라이트가 있는 좌표를 e, f라 하자.<br/>
영우가 라이트 범위에 있다는 것은 e ≤ c, f ≤ d를 만족하는 것이다.<br/>
이후 스위핑으로 변형된 a에 대해 오름차순 정렬하고, a가 같은 경우 스포트라이트를 먼저 배치하고 이후 영우의 갯수를 확인하는 식으로 하면 1차원으로 바꿀 수 있다.<br/>
이후 영우가 들어오면 b좌표보다 작은 스포트 라이트의 갯수를 세어주면 해당 영우의 좌표가 스포트 라이트를 받는 갯수와 일치한다.<br/>
범위에 포함된 값을 세어야 하기에 세그먼트 트리로 관리했다.<br/>


## 문제 링크
https://www.acmicpc.net/problem/15807