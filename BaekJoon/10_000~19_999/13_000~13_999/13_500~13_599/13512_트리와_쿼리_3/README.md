# C#

## 난이도 : 플레티넘 1

## 알고리즘 분류
  - 자료 구조
  - 트리
  - 세그먼트 트리
  - heavy-light 분할

## 제한조건
  - 시간 제한 : 2초
  - 메모리 제한 : 512 MB

## 문제
N개의 정점으로 이루어진 트리(무방향 사이클이 없는 연결 그래프)가 있다. 정점은 1번부터 N번까지 번호가 매겨져 있고, 간선은 1번부터 N-1번까지 번호가 매겨져 있다. 가장 처음에 모든 정점의 색은 흰색이다.<br/>
아래의 두 쿼리를 수행하는 프로그램을 작성하시오.<br/>

  - 1 i: i번 정점의 색을 바꾼다. (흰색 -> 검정색, 검정색 -> 흰색)
  - 2 v: 1번 정점에서 v번 정점으로 가는 경로에 존재하는 첫 번째 검정 정점의 번호를 출력한다. 만약, 그러한 정점이 없으면 -1을 출력한다.


## 입력
첫째 줄에 N (2 ≤ N ≤ 100,000)이 주어진다.<br/>
둘째 줄부터 N-1개의 줄에는 i번 간선이 연결하는 두 정점 번호 u와 v가 주어진다.<br/>
다음 줄에는 쿼리의 개수 M (1 ≤ M ≤ 100,000)이 주어진다.<br/>
다음 M개의 줄에는 쿼리가 한 줄에 하나씩 주어진다.<br/>


## 출력
각각의 2번 쿼리의 결과를 순서대로 한 줄에 하나씩 출력한다.<br/>


## 예제 입력
9<br/>
1 2<br/>
1 3<br/>
2 4<br/>
2 9<br/>
5 9<br/>
7 9<br/>
8 9<br/>
6 8<br/>
8<br/>
2 3<br/>
1 8<br/>
2 6<br/>
2 7<br/>
1 2<br/>
2 9<br/>
1 2<br/>
2 9<br/>


## 예제 출력
-1<br/>
8<br/>
-1<br/>
2<br/>
-1<br/>


## 풀이
트리에서 경로에 있는 노드들을 다루는 문제이므로 HLD 알고리즘을 썼다.<br/>
그리고 세그먼트 트리의 리프에는 노드의 상태를 저장했다.<br/>
리프가 아닌 노드에는 가장 루트와 가까운 흰색의 정점을 저장했다.<br/>
HLD 알고리즘의 특징으로 두 노드의 헤드가 같은 경우, 인덱스가 낮은게 루트와 가까운게 보장된다.<br/>
그래서 검정 노드의 인덱스가 낮은 것을 보관해 가면 된다.<br/>


## 문제 링크
https://www.acmicpc.net/problem/13512