# C#

## 난이도 : 플레티넘 1

## 알고리즘 분류
  - 자료 구조
  - 트리
  - 세그먼트 트리
  - 느리게 갱신되는 세그먼트 트리
  - 최소 공통 조상
  - heavy-light 분할

## 제한조건
  - 시간 제한 : 4초
  - 메모리 제한 : 1024 MB

## 문제
1부터 N까지의 번호가 붙은 N개의 정점과 N-1개의 간선으로 이루어진 트리가 주어진다. 이제 당신은 이 트리에 대해 다음 질문을 Q번 답해야 한다.<br/>

  - a b c d: 정점 a에서 b로 가는 최단 경로에 속한 모든 간선을 제거하였을 때, c에서 d로 가는 경로가 존재한다면 “YES”를 존재하지 않는다면 “NO”를 출력한다. 따옴표는 출력하지 않는다.

질문의 결과는 다른 질문에 영향을 끼치지 않는다. 또한 트리의 루트는 항상 1번 정점이며 모든 간선은 양방향이다.<br/>


## 입력
입력의 첫 번째 줄에 N과 Q가 공백으로 구분되어 주어진다. (2 ≤ N ≤ 100,000; 1 ≤ Q ≤ 300,000)<br/>
두 번째 줄부터 N-1개 줄 각각에는 트리의 간선이 연결하는 2개의 정점의 번호와 u와 v가 공백으로 구분되어 주어진다. 이는 정점 u와 정점 v를 연결하는 양방향 간선이 존재한다는 의미이다. (1 ≤ u, v ≤ N; u ≠ v)<br/>
N+1번째 줄부터 Q개의 줄에 걸쳐 질문을 나타내는 4개의 정수 a, b, c, d가 공백으로 구분되어 주어진다. (1 ≤ a, b, c, d ≤ N)<br/>


## 출력
Q개의 줄에 걸쳐 질문의 답을 한 줄에 하나씩 출력한다.<br/>


## 예제 입력
8 4<br/>
1 2<br/>
1 3<br/>
3 4<br/>
3 5<br/>
3 6<br/>
4 7<br/>
4 8<br/>
6 7 2 3<br/>
6 7 7 8<br/>
4 6 1 5<br/>
4 7 4 8<br/>


## 예제 출력
YES<br/>
NO<br/>
YES<br/>
YES<br/>


## 풀이
그래프는 트리로 주어진다.<br/>
그래서 A에서 B로 가는 최단 경로는 유일하다.<br/>
트리에서 C와 D를 잇는 간선을 루트와 더 거리가 먼 노드에 가중치 1을 주는 것으로 간선을 대체할 수 있다.<br/>
그리고 트리에서 A에서 B로 가는 경로에 범위를 다루기에 HLD 알고리즘으로 인덱스 새로 부여해 관리했다.<br/>
그리고 가중치는 이어져 있으면 1, 끊어지면 0으로 보면 해당 범위에 0이 하나라도 포함되면 해당 구간은 0이되어야 한다.<br/>
그래서 범위를 다루는 세그먼트 트리는 최솟값을 관리하는 세그먼트 트리로 경로를 관리했다.<br/>
이후 C에서 D로 가는 경로가 1인지 0인지 확인하면 된다.<br/>


## 문제 링크
https://www.acmicpc.net/problem/30092