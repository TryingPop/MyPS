# C#

## 난이도 : 골드 5

## 알고리즘 분류
  - 다이나믹 프로그래밍
  - 그래프 이론
  - 그래프 탐색
  - 너비 우선 탐색

## 제한조건
  - 시간 제한 : 1초
  - 메모리 제한 : 1024 MB

## 문제
NLCS Jeju의 기숙사 이름 "오름"은 제주에서 봉우리나 산을 부르는 말인 오름에서 따왔다. 각 기숙사의 학생들은 1년에 한 번, 실제로 기숙사 이름의 기원인 오름을 오르게 된다.<br/>
오름은 xy 평면에서 세 점 (0, 0), (N, N), (2N, 0)을 잇는 삼각형 모양이다. 당신은 (0, 0)에서 출발해서 (2N, 0)에 도착해야 한다.<br/>
이동할 때는 (x, y)에서 (x+1, y+1) 혹은 (x+1, y-1)로만 이동할 수 있다. 또한 이동하여 도착한 위치는 오름의 내부 혹은 경계여야 한다.<br/>
오름에서 길을 잃기 쉽기 때문에 길을 잃기 쉬운 M개의 지점에 선생님들이 계신다. 하지만 숙제를 하지 않은 당신은 선생님과 만나는 것이 부담스럽기 때문에 선생님을 피해서 이동해야 한다.<br/>
또한 당신은 오름 등산을 특별한 기억으로 남기기 위해 사진을 찍기로 했다. 사진의 아름다움은 사진을 찍은 높이가 높을수록 커진다. 정확하게는 사진을 찍은 y좌표가 그 사진의 아름다움 수치가 된다.<br/>
얼마나 아름다운 사진을 찍을 수 있을지 구해보자.<br/>


## 입력
첫 번째 줄에 오름의 높이 N과 선생님이 계시는 지점의 개수 M이 공백을 사이에 두고 주어진다.<br/>
두 번째 줄부터 M+1번째 줄까지 선생님의 x좌표 x_i와 y좌표 y_i가 공백으로 구분되어 주어진다. 선생님은 항상 오름의 내부 혹은 경계에 있다.<br/>


## 출력
첫 번째 줄에 찍을 수 있는 사진의 아름다움의 최댓값을 출력한다. 단, 시작 지점에서 도착 지점까지 이동할 수 없는 경우에는 -1을 출력한다.<br/>


## 제한
  - 1 ≤ N ≤ 1,000
  - 0 ≤ M ≤ min((n + 1) * (n + 2) / 2 - 1, 100,000)
  - 0 ≤ x_i ≤ 2N
  - 0 ≤ y_i ≤ N
  - x_i + y_i는 짝수다.
  - (0, 0)에는 선생님이 계시지 않는다.


## 예제 입력
4 3<br/>
2 2<br/>
4 0<br/>
5 3<br/>


## 예제 출력
2<br/>


## 풀이
N이 1000이므로 이동할 수 있는 좌표의 갯수는 1000 x 2000 = 200만개를 넘지 못한다.<br/>
그래서 배열을 이용해 맵을 모두 표현할 수 있다.<br/>
선생님이 오는 좌표를 모두 맵에 기록해두고 못지나가는 장소로 놔뒀다.<br/>


이동 방법이 x + 1, y - 1이거나 x + 1, y + 1뿐이고 어떻게 이동하던 x + 1이 된다.<br/>
그래서 다음과 같은 dp를 이용해 풀었다.<br/>
dp[i][j] = val를 x = i, y = j에 이동할 때 가장 큰 높이 val를 담기게 했다.<br/>


그러면 x + 1, y - 1로 이동 가능한 경우 높이가 낮아지기에 최댓값은 dp[i][j]나 다른 경로에선 온 dp[i + 1][j - 1] 중 최댓값이 dp[i + 1][j - 1]의 값이 될 것이다.<br/>
그래서 dp[i + 1][j - 1] = Math.Max(dp[i + 1][j - 1], dp[i][j])이다.<br/>


반면 x + 1, y + 1로 이동 가능한 경우 dp[i][j]로 오는 최댓값과 이동 했을 때의 최댓값 j + 1, 혹은 다른 경로에서 온 dp[i + 1][j + 1]의 최댓값 중에서 dp[i + 1][j + 1]의 최댓값을 갖게 될 것이다.<br/>
그래서 dp[i + 1][j + 1] = Math.Max(dp[i + 1][j + 1], Math.Max(dp[i][j], j + 1))을 얻을 수 있다.<br/>


해당 점화식을 이용해 x를 0에서 2N까지 이동해서 dp의 값을 채워가면 된다.<br/>


여기서 x와 x + 1만 중요하기에 dp의 i크기를 2개를 재활용?해서 해결할 수 있다.<br/>
이 경우 선생님이 계시는 x에 따른 위치를 빠르게 찾을 수 있어야 한다.<br/>
해당 방법으로는 선생님의 위치를 모두 모아놓은 배열을 x에 따라 정렬한다.<br/>
그리고 선생님의 좌표를 두 포인터로 못 오는 장소를 확인하며 풀 수 있다.<br/>


## 문제 링크
https://www.acmicpc.net/problem/31671