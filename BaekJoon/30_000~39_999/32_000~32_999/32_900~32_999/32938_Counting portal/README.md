# C#

## 난이도 : 플레티넘 4

## 알고리즘 분류
  - 누적 합

## 제한조건
  - 시간 제한 : 1초
  - 메모리 제한 : 1024 MB

## 문제
마인크래프트는 다양한 종류의 블록을 이용해 구조물을 만들 수 있는 게임이다. 게임 내에서 블록은 다음 3가지 종류로 구분할 수 있다.<br/>

  - 빈 공간(0): 비어 있는 공간으로, 어떤 블록도 없는 상태이다.
  - 옵시디언 블록(1): 특수한 블록으로, 문제에서 중요한 역할을 하는 블록이다.
  - 그 외의 블록(2): 나무 블록, 흙 블록 등이 해당된다.

마인크래프트에는 지옥문이라는 특별한 구조물이 있다. 지옥문은 특정한 조건을 만족하는 직사각형 모양의 구멍의 형태를 갖춘 구조물로, 지옥으로 이동하는 통로로 사용된다.<br/>
높이 N, 너비 M인 직사각형 모양의 현재 상태 S가 주어진다. 위치 (r, c)에 해당되는 S_{r, c}는 현재 상태 S의 r번째 행, c번째 열에 해당되는 블록을 나타내며, 위에서 언급한 3가지 종류의 블록(0, 1, 또는 2) 중 하나이다.<br/>
두 위치 (r_1, c_1), (r_2, c_2)를 각각 직사각형의 왼쪽 위 꼭짓점과 오른쪽 아래 꼭짓점으로 하여 지옥문을 만들고자 한다. 플레이어는 블록을 제거할 수 없고, 옵시디언 블록만을 자유롭게 설치할 수 있는 상황이다. 이 경우, 지옥문을 만들 수 있는 조건은 다음과 같다.<br/>

  - r_2 - r_1 ≥ 4, c_2 - c_1 ≥ 3 
  - c_1 < c < c_2를 만족하는 모든 c에 대해, S_{r_1,c} ≠ 2이고 S_{r_2,c} ≠ 2이다.
  - r_1 < r < r_2를 만족하는 모든 r에 대해, S_{r,c_1} ≠ 2이고 $S_{r,c_2} ≠ 2이다.
  - r_1 < r < r_2, c_1 < c < c_2를 만족하는 모든 순서쌍 (r, c)에 대해, S_{r,c}=0이다.

실제 마인크래프트와는 달리, 여기서 지옥문의 최대 크기에는 제한이 없다.<br/>
이 때, 지옥문을 만들 수 있는 순서쌍 (r_1, c_1, r_2, c_2)의 개수를 구하여라.<br/>


## 입력
첫 번째 줄에 현재 상태 S의 크기 N과 M이 주어진다. (5 ≤ N ≤ 300, 4 ≤ M ≤ 300)<br/>
두 번째 줄부터 N개의 줄에 걸쳐 M개의 수가 공백으로 구분되어 주어진다. i+1번째 줄의 j번째 수는 S_{i,j}를 나타낸다. 0은 비어있는 상태, 1은 옵시디언 블록으로 채워진 상태, 2는 그 외의 블록으로 채워진 상태이다.<br/>


## 출력
조건에 따라 지옥문을 만들 수 있는 순서쌍 (r_1, c_1, r_2, c_2)의 개수를 출력한다.<br/>


## 예제 입력
6 6<br/>
0 2 1 0 0 0<br/>
0 0 0 0 0 0<br/>
1 0 0 0 1 1<br/>
0 0 0 0 0 0<br/>
0 0 0 0 0 0<br/>
1 2 1 0 1 2<br/>


## 예제 출력
3<br/>


## 풀이
지옥문 내부는 0으로만 이루어져야 한다. 즉, 직사각형 내부의 합은 0이다.<br/>
그리고 음수인 값은 없으므로 직사각형 내부의 합이 0이면 내부는 모두 0으로 이루어져 있다고 할 수 있다.<br/>
누적합을 이용하면 내부가 0인지 판별하면 된다.<br/>
이제 가장자리의 경우 1이 포함되어도 되지만 2는 포함되면 안된다.<br/>
그리고 직사각형의 가로 세로 길이는 맵의 크기 300을 넘지 못한다.<br/>
이에 2의 값을 301 이상인 500 으로 변형했다.<br/>
이제 누적합을 구할 때 외각 선분의 합이 500을 넘는지 판별해 불가능함을 판별했다.<br/>
이렇게 누적합을 쓰면 해당 직사각형이 O(1)에 불가능함을 알 수 있다.<br/>
이제 모든 직사각형 판별은 윗 선분과 아랫 선분을 고정하고,<br/>
세로 부분을 두 포인터 알고리즘을 이용해 판별했다.<br/>


## 문제 링크
https://www.acmicpc.net/problem/32938